<!DOCTYPE html>
<html>

<body>

  <p id="demo"></p>
  <form name="coordinates" action="http://localhost:5000/location" method="POST">
    <p>Currently finding your location...</p>
    <img src="static/images/giphy.gif">

    <input type="hidden" id="lat" name="latitude" value="" /><br />
    <input type="hidden" id="lng" name="longitude" value="" /><br />
  </form>

</body>

<script>
  var x = document.getElementById("demo");

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }

  function showPosition(position) {
    x.innerHTML = "Latitude: " + position.coords.latitude +
      "<br>Longitude: " + position.coords.longitude;
    console.log("Reached showPosition() " + position.coords.latitude);
    document.getElementById("lat").value = position.coords.latitude;
    document.getElementById("lng").value = position.coords.longitude;
    document.coordinates.submit();
  }
</script>

</html>
